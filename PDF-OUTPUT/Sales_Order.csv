"ID","DocType","Standard","Module","Default Print Language","Custom Format","Disabled","Print Format Type","Raw Printing","HTML","Raw Commands","Align Labels to the Right","Show Section Headings","Show Line Breaks after Sections","Show Absolute Values","Font","Custom CSS","Format Data","Print Format Builder"
"ITG - Sales Order - Test","Sales Order","No","Selling","en",0,0,"Jinja",0,"","",0,0,0,0,"Default","","[{""fieldname"": ""print_heading_template"", ""fieldtype"": ""Custom HTML"", ""options"": ""<style>\n  body{ font-family:\""TH Sarabun New\"",\""TH Sarabun\"",Arial,sans-serif; font-size:12px; margin:0; padding:10px; line-height:1.3; color:#000; }\n  .layout-table{ width:100%; border-collapse:collapse; margin-bottom:6px; }\n  .layout-table td{ vertical-align:top; padding:3px; }\n\n  .doc-header-right{ text-align:right; }\n  .doc-header-right div{ margin-bottom:2px; }\n  .doc-title{ font-weight:bold; font-size:18px; }\n\n  .draft-status{ text-align:center; color:black; font-weight:bold; font-size:16px; margin:6px 0; }\n\n  .section-header{ font-size:12px; font-weight:bold; margin:6px 0 3px 0; }\n  .address-box{ padding:8px; min-height:90px; font-size:12px; }\n  .party-name{ font-weight:bold; margin-bottom:4px; display:block; }\n</style>\n\n{# 1) \u0e15\u0e49\u0e2d\u0e07 set customer_group \u0e01\u0e48\u0e2d\u0e19\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19 #}\n{% set customer_group = frappe.db.get_value('Customer', doc.customer, 'customer_group') or '' %}\n\n<div class=\""print-heading\"">\n  <table class=\""layout-table\"">\n    <tr>\n      <td style=\""width:60%;\""></td>\n      <td style=\""width:40%;\"" class=\""doc-header-right\"">\n        <div class=\""doc-title\"">\n          {% if customer_group and customer_group.upper() == \""FOREIGN\"" %}\n            Sales Order\n          {% else %}\n            \u0e43\u0e1a\u0e04\u0e33\u0e2a\u0e31\u0e48\u0e07\u0e02\u0e32\u0e22\n          {% endif %}\n        </div>\n        <div>Date: {{ frappe.utils.formatdate(doc.transaction_date, 'dd/MM/yyyy') }}</div>\n        <div>{{ doc.name }}</div>\n      </td>\n    </tr>\n  </table>\n</div>\n\n{%- if doc.docstatus == 0 -%}\n  <div class=\""draft-status\"">== DRAFT ==</div>\n{%- endif -%}\n\n{# ===== Macro: render_address_with_branch (\u0e40\u0e2b\u0e21\u0e37\u0e2d\u0e19\u0e40\u0e14\u0e34\u0e21\u0e17\u0e35\u0e48\u0e2d\u0e31\u0e1b\u0e40\u0e14\u0e15\u0e41\u0e25\u0e49\u0e27) ===== #}\n{% macro render_address_with_branch(address_text, tax_id=None, customer_group=None) -%}\n  {% set raw = (address_text or '') \n      | replace('<br />', '\\n') | replace('<br/>', '\\n') | replace('<br>', '\\n') | trim %}\n  {% set lines = raw.split('\\n') %}\n  {% set first_line = (lines[0] if lines|length > 0 else '') %}\n  {% set rest_lines = (lines[1:] if lines|length > 1 else []) %}\n\n  {% set code = first_line[:5] if first_line|length >= 5 and first_line[:5].isdigit() else '' %}\n  {% set remainder = (first_line[5:].strip() if code else first_line) %}\n\n  {% set grp = (customer_group or '') | upper %}\n  {% set is_foreign = (grp == 'FOREIGN') %}\n\n  {% if code %}\n    {% if code == '00000' %}\n      {% set branch_label = ('HeadQuarter' if is_foreign else '\u0e2a\u0e33\u0e19\u0e31\u0e01\u0e07\u0e32\u0e19\u0e43\u0e2b\u0e0d\u0e48') %}\n    {% else %}\n      {% set branch_label = (('Branch ' ~ code) if is_foreign else ('\u0e2a\u0e32\u0e02\u0e32\u0e17\u0e35\u0e48 ' ~ code)) %}\n    {% endif %}\n    {{ branch_label }}{% if remainder %} {{ remainder }}{% endif %}<br>\n    {{ rest_lines | join('<br>') | safe }}\n  {% else %}\n    {{ lines | join('<br>') | safe }}\n  {% endif %}\n\n  {% if tax_id %}\n    <br>\u0e40\u0e25\u0e02\u0e1b\u0e23\u0e30\u0e08\u0e33\u0e15\u0e31\u0e27\u0e1c\u0e39\u0e49\u0e40\u0e2a\u0e35\u0e22\u0e20\u0e32\u0e29\u0e35 {{ tax_id }}\n  {% endif %}\n{%- endmacro %}\n\n<table class=\""layout-table margin-bottom\"">\n  <tr>\n    <td style=\""width:50%;\"">\n      <div class=\""section-header\"">Sold To:</div>\n      <div class=\""address-box\"">\n        <span class=\""party-name\"">{{ doc.customer_name }}</span>\n        {{ render_address_with_branch(doc.address_display, doc.tax_id, customer_group) }}\n      </div>\n    </td>\n    <td style=\""width:50%;\"">\n      <div class=\""section-header\"">Ship To:</div>\n      <div class=\""address-box\"">\n        <span class=\""party-name\"">{{ doc.shipping_address_name or doc.customer_name }}</span>\n        {{ render_address_with_branch(\n            doc.shipping_address or doc.shipping_address_display or doc.address_display,\n            None,\n            customer_group\n        ) }}\n      </div>\n    </td>\n  </tr>\n</table>\n""}, {""fieldtype"": ""Section Break"", ""label"": """"}, {""fieldtype"": ""Column Break""}, {""fieldname"": ""_custom_html"", ""print_hide"": 0, ""label"": ""Custom HTML"", ""fieldtype"": ""HTML"", ""options"": ""{# ------------------- Head 002 -------------------- #}\n{% set w_sa = [\""N/A\""] %}\n{% for sales in doc.sales_team %}\n    {% if sales.sales_person %} {% if w_sa.append ( sales.sales_person )  %} {% endif %} {% endif %}\n{% endfor %}\n\n<div class=\""margin-top\"">\n    <table class=\""table table-bordered table-condensed\"" style=\""width:100%;\"">\n        <caption><strong> </strong></caption>\n        <tr>\n            <th style=\""text-align:center; width:15%;\"">Contact</th>\n            <th style=\""text-align:center; width:20%;\"">PO Number</th>\n            <th style=\""text-align:center; width:15%;\"">Customer No</th>\n            <th style=\""text-align:center; width:15%;\"">Sales Person</th>\n            <th style=\""text-align:center; width:10%;\"">Term</th>\n        </tr>\n        <tr>\n            <td style=\""text-align:center; width:15%;\"">xx</td>\n            <td style=\""text-align:center; width:25%;\"">{{ doc.po_no }}</td>\n            <td style=\""text-align:center; width:15%;\"">{{ doc.customer }}</td>\n            <td style=\""text-align:center; width:15%;\"">{{ w_sa[-1] }}</td>\n            <td style=\""text-align:center; width:10%;\""><strong>{{ doc.payment_terms_template }}</strong></td>\n        </tr>\n    </table>\n</div>""}, {""fieldname"": ""_custom_html"", ""print_hide"": 0, ""label"": ""Custom HTML"", ""fieldtype"": ""HTML"", ""options"": ""{# ------------------- table 1 : each line from Sales Order Item -------------------- #}\n<style>\n    thead {display: table-header-group;}\n    \n    /* \u0e2a\u0e33\u0e2b\u0e23\u0e31\u0e1a\u0e08\u0e31\u0e14\u0e43\u0e2b\u0e49 Label \u0e41\u0e25\u0e30\u0e04\u0e48\u0e32\u0e15\u0e23\u0e07\u0e01\u0e31\u0e19\u0e41\u0e25\u0e30\u0e0a\u0e34\u0e14\u0e02\u0e27\u0e32 */\n    .summary-table {\n        width: 100%;\n    }\n    \n    .summary-table td:first-child {\n        text-align: right;\n        padding-right: 10px;\n        white-space: nowrap;\n        width: 60%;\n    }\n    \n    .summary-table td:last-child {\n        text-align: right;\n        padding-left: 10px;\n        width: 40%;\n    }\n    \n    .summary-table tr:last-child td {\n        font-weight: bold;\n    }\n    \n    /* \u0e2a\u0e33\u0e2b\u0e23\u0e31\u0e1a\u0e15\u0e32\u0e23\u0e32\u0e07 Amount \u0e0a\u0e34\u0e14\u0e0b\u0e49\u0e32\u0e22 */\n    .amount-table {\n        width: 100%;\n    }\n    \n    .amount-table td:first-child {\n        text-align: left;\n        padding-right: 10px;\n        white-space: nowrap;\n        vertical-align: middle;\n    }\n    \n    .amount-table td:last-child {\n        text-align: left;\n        padding-left: 0px;\n        vertical-align: middle;\n    }\n</style>\n\n<table class=\""table table-bordered table-condensed\"">\n    <caption>each line from Sales Order Item</caption>\n    <thead class=\""repeat table_header\"">\n    <tr>\n        <th>Item No.</th>\n        <th>Description</th>\n        <th>Qty</th>\n        <th>Unit Price</th>\n        <th>Amount</th>\n    </tr>\n    </thead>\n    {% set asumm = [0] %} \n    {% set ll = [0] %}\n    {% for item in doc.items %}  {# | sort (attribute='reference_name') #}\n        <tr>\n            <td>{{ item.item_code }}</td>\n            <td>{{ item.description }}</td>\n            <td>{{ frappe.utils.fmt_money(item.qty,format='Integer') }}</td>\n            <td style=\""text-align:right\"">{{ frappe.utils.fmt_money(item.base_rate) }}</td>\n            <td style=\""text-align:right\"">{{ frappe.utils.fmt_money(item.base_amount) }}</td>\n        </tr>\n        {% if asumm.append(asumm[-1]  + item.base_amount) %}{% endif %}\n    {% endfor %}\n    <tr>\n        <td></td>\n        <td style=\""text-align:right\""><strong>Total</strong></td>\n        <td></td>\n        <td></td>\n        <td style=\""text-align:right\""><strong>{{ frappe.utils.fmt_money(asumm[-1]) }}</strong></td>\n    </tr>\n</table>\n\n{# below is the summary part of items detail #}\n{% set total_amt    = asumm[-1] %}\n{% set disc_amt     =  0.0 %} {# doc.discount_amt #}\n{% set total_b4_vat = ( total_amt - disc_amt ) %}\n{% set vat_amt = doc.total_taxes_and_charges or (total_b4_vat * 0.07) %}\n{% set grand_amt    = total_b4_vat + vat_amt %}\n\n<div class=\""row margin-bottom\"">\n    <div class=\""col-xs-6\"">\n        <table>\n            <tr><td>   </td></tr> \n            <tr><td>   </td></tr> \n            <tr><td>   </td></tr> \n            <tr><td>   </td></tr>\n        </table>\n    </div>\n</div>\n\n<div class=\""row margin-bottom\"">\n    <div class=\""col-xs-6\"">\n        <table class=\""amount-table\"">\n            <tr><td></td><td></td></tr>\n            <tr><td></td><td></td></tr>\n            <tr><td></td><td></td></tr>          \n            <tr><td></td><td></td></tr>\n            <tr><td></td><td></td></tr>\n            <tr><td></td><td></td></tr>     \n            <tr><td></td><td></td></tr> \n            <tr><td></td><td></td></tr> \n            <tr><td></td><td></td></tr>\n            <tr>\n                <td style=\""vertical-align: top; line-height: 1.4;\""><strong>Amount:</strong></td>\n                <td style=\""vertical-align: top; line-height: 1.4;\"">{{ frappe.utils.money_in_thai(grand_amt) }}</td>\n            </tr>\n        </table>\n    </div>\n    <div class=\""col-xs-6\"">\n        <table class=\""summary-table\"">\n            <tr>\n                <td><strong>The Value:</strong></td>\n                <td>{{ frappe.utils.fmt_money(total_amt) }}</td>\n            </tr>\n            <tr>\n                <td><strong>Discount:</strong></td>\n                <td>{{ frappe.utils.fmt_money(disc_amt) }}</td>\n            </tr>\n            <tr>\n                <td><strong>Total:</strong></td>\n                <td>{{ frappe.utils.fmt_money(total_b4_vat) }}</td>\n            </tr>\n            <tr>\n                <td><strong>VAT 7%:</strong></td>\n                <td>{{ frappe.utils.fmt_money(vat_amt) }}</td>\n            </tr>\n            <tr>\n                <td><strong>Grand Total:</strong></td>\n                <td>{{ frappe.utils.fmt_money(grand_amt) }}</td>\n            </tr>\n        </table>\n    </div>\n</div>""}]",1
